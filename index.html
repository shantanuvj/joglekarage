<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Age Calculator</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Custom class to prevent text from wrapping and handle overflow */
        .no-wrap-overflow {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis; /* Optional: adds a ellipsis (...) if text is too long */
        }
    </style>
</head>
<body class="bg-gray-950 text-gray-200 min-h-screen flex items-center justify-center p-4">
    <div class="w-full max-w-6xl bg-gray-900 rounded-3xl p-8 md:p-12 shadow-2xl border border-gray-800">
        <!-- Header Section -->
        <div class="text-center mb-10">
            <h1 class="text-4xl md:text-5xl font-extrabold text-white mb-2">My Time on Earth</h1>
            <p class="text-lg text-gray-400">A dynamic look at my age, down to the second.</p>
        </div>

        <!-- Sorting Control -->
        <div class="flex items-center justify-end mb-8 pr-2">
            <label for="sort-select" class="text-gray-400 text-sm font-medium mr-2">Sort by:</label>
            <select id="sort-select" class="bg-gray-700 text-white rounded-lg p-2 focus:ring-2 focus:ring-blue-500 focus:outline-none transition-colors duration-200">
                <option value="none">Default Order</option>
                <option value="asc">Age (Youngest First)</option>
                <option value="desc">Age (Oldest First)</option>
            </select>
        </div>

        <!-- Dynamic Content Container -->
        <div id="people-container" class="space-y-8">
            <!-- Content will be injected here by JavaScript -->
        </div>
    </div>

    <script>
        let updateIntervalId;

        // The data to be used in the application.
        const people = [
            { name: "Govindrao", dob: "03/29/1940" },
            { name: "Vijaya", dob: "10/13/1945" },
            { name: "Harshal", dob: "07/26/1976" },
            { name: "Archana", dob: "12/14/1980" },
            { name: "Yash", dob: "04/16/2003" },
            { name: "Vilas", dob: "12/13/1947" },
            { name: "Neha", dob: "05/03/1950" },
            { name: "Jui", dob: "01/04/1991" },
            { name: "Varun", dob: "01/01/1985" },
            { name: "Vidyadhar", dob: "09/29/1949" },
            { name: "Vinita", dob: "04/24/1955" },
            { name: "Namrata", dob: "05/18/1987" },
            { name: "Kanishka", dob: "01/01/1980" },
            { name: "Nishad", dob: "10/20/1996" },
            { name: "Ninad", dob: "10/20/1996" },
            { name: "Madhuri", dob: "09/18/1952" },
            { name: "Kalpak", dob: "05/24/1992" },
            { name: "Anuja", dob: "04/24/1992" },
            { name: "Ravi", dob: "02/24/1958" },
            { name: "Vasudev", dob: "06/22/1955" },
            { name: "Daksha", dob: "05/16/1958" },
            { name: "Shantanu Joglekar", dob: "08/05/1991" },
            { name: "Geeta", dob: "06/07/1958" },
            { name: "Snehal", dob: "09/14/1983" },
            { name: "Janu", dob: "11/04/1987" },
            { name: "Charvy", dob: "05/07/2013" },
            { name: "Abhishek", dob: "03/29/1990" },
            { name: "Rutuja", dob: "06/11/1994" },
            { name: "Nishchaya", dob: "02/05/2024" }
        ];

        /**
         * Formats a number with commas according to the Indian numbering system.
         * @param {number} num The number to format.
         * @returns {string} The formatted number string.
         */
        function formatIndianNumber(num) {
            let s = num.toString();
            let lastThree = s.substring(s.length - 3);
            let otherNumbers = s.substring(0, s.length - 3);
            if (otherNumbers !== '')
                lastThree = ',' + lastThree;
            let result = otherNumbers.replace(/\B(?=(\d{2})+(?!\d))/g, ",") + lastThree;
            return result;
        }
        
        /**
         * Dynamically adjusts the font size of an element to fit its container.
         * @param {HTMLElement} element The element to adjust.
         */
        function adjustFontSize(element) {
            // Reset font size to default before calculating, in case it was shrunk previously
            element.style.fontSize = ''; 
            
            // Get the initial font size and container width
            let fontSize = parseFloat(window.getComputedStyle(element).fontSize);
            const containerWidth = element.parentElement.clientWidth;

            // Reduce font size in a loop until it fits
            while (element.scrollWidth > containerWidth && fontSize > 10) {
                fontSize -= 1;
                element.style.fontSize = `${fontSize}px`;
            }
        }

        /**
         * Creates and returns an HTML element for a person's age details.
         * @param {object} person The person object with name and dob.
         * @returns {string} The HTML string for the person's container.
         */
        function createPersonHtml(person) {
            return `
                <div class="bg-gray-800 rounded-xl p-6 shadow-inner mb-4">
                    <!-- Name and DOB at the top -->
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="w-6 h-6 text-blue-400 mr-2 md:mr-4" viewBox="0 0 16 16">
                                <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
                                <path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"/>
                            </svg>
                            <div>
                                <h2 class="text-base md:text-xl font-bold text-gray-100">${person.name}</h2>
                                <p class="text-xs text-gray-400">Name</p>
                            </div>
                        </div>
                        <div class="flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="w-6 h-6 text-pink-400 mr-2 md:mr-4" viewBox="0 0 16 16">
                                <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
                                <path d="M12.556 12.822a.493.493 0 0 1-.297-.474c.059-.444.204-1.077.297-1.472.043-.178.068-.352.091-.532l.004-.035.003-.024.004-.029.006-.039a.594.594 0 0 1 .159-.395l.006-.008.006-.008a.56.56 0 0 1 .118-.175l.004-.005c.106-.118.271-.19.456-.206.185-.015.378.016.536.14.158.125.267.318.283.528l.013.167.013.176.012.164.011.162.008.118a.593.593 0 0 1 .053.255c-.017.202-.047.411-.082.607-.035.196-.067.42-.089.58-.022.16-.03.284-.03.35l-.001.002a.493.493 0 0 1-.498.498c-.161 0-.315-.065-.436-.184l-.007-.007-.007-.007a.56.56 0 0 1-.175-.118l-.008-.006-.008-.006a.594.594 0 0 1-.395-.159l-.029-.006-.024-.003-.035-.004-.039-.006a.493.493 0 0 1-.474.297zM3.444 12.822a.493.493 0 0 1-.297-.474c.059-.444.204-1.077.297-1.472.043-.178.068-.352.091-.532l.004-.035.003-.024.004-.029.006-.039a.594.594 0 0 1 .159-.395l.006-.008.006-.008a.56.56 0 0 1 .118-.175l.004-.005c.106-.118.271-.19.456-.206.185-.015.378.016.536.14.158.125.267.318.283.528l.013.167.013.176.012.164.011.162.008.118a.593.593 0 0 1 .053.255c-.017.202-.047.411-.082.607-.035.196-.067.42-.089.58-.022.16-.03.284-.03.35l-.001.002a.493.493 0 0 1-.498.498c-.161 0-.315-.065-.436-.184l-.007-.007-.007-.007a.56.56 0 0 1-.175-.118l-.008-.006-.008-.006a.594.594 0 0 1-.395-.159l-.029-.006-.024-.003-.035-.004-.039-.006a.493.493 0 0 1-.474.297zM3.444 12.822a.493.493 0 0 1-.297-.474c.059-.444.204-1.077.297-1.472.043-.178.068-.352.091-.532l.004-.035.003-.024.004-.029.006-.039a.594.594 0 0 1 .159-.395l.006-.008.006-.008a.56.56 0 0 1 .118-.175l.004-.005c.106-.118.271-.19.456-.206.185-.015.378.016.536.14.158.125.267.318.283.528l.013.167.013.176.012.164.011.162.008.118a.593.593 0 0 1 .053.255c-.017.202-.047.411-.082.607-.035.196-.067.42-.089.58-.022.16-.03.284-.03.35l-.001.002a.493.493 0 0 1-.498.498c-.161 0-.315-.065-.436-.184l-.007-.007-.007-.007a.56.56 0 0 1-.175-.118l-.008-.006-.008-.006a.594.594 0 0 1-.395-.159l-.029-.006-.024-.003-.035-.004-.039-.006a.493.493 0 0 1-.474.297z"/>
                            </svg>
                            <div>
                                <h2 class="text-base md:text-xl font-bold text-gray-100">${person.dob}</h2>
                                <p class="text-xs text-gray-400">Date of Birth</p>
                            </div>
                        </div>
                    </div>
                    <!-- Age Grid -->
                    <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-6">
                        <!-- Years -->
                        <div class="bg-gray-700 rounded-xl p-6 shadow-inner flex flex-col items-center justify-center">
                            <div class="text-2xl md:text-3xl font-extrabold text-white mb-1 px-1 no-wrap-overflow" id="${person.name.replace(/\s/g, '-')}-years"></div>
                            <div class="text-sm text-gray-400">Years</div>
                        </div>
                        <!-- Months -->
                        <div class="bg-gray-700 rounded-xl p-6 shadow-inner flex flex-col items-center justify-center">
                            <div class="text-2xl md:text-3xl font-extrabold text-white mb-1 px-1 no-wrap-overflow" id="${person.name.replace(/\s/g, '-')}-months"></div>
                            <div class="text-sm text-gray-400">Months</div>
                        </div>
                        <!-- Weeks -->
                        <div class="bg-gray-700 rounded-xl p-6 shadow-inner flex flex-col items-center justify-center">
                            <div class="text-2xl md:text-3xl font-extrabold text-white mb-1 px-1 no-wrap-overflow" id="${person.name.replace(/\s/g, '-')}-weeks"></div>
                            <div class="text-sm text-gray-400">Weeks</div>
                        </div>
                        <!-- Days -->
                        <div class="bg-gray-700 rounded-xl p-6 shadow-inner flex flex-col items-center justify-center">
                            <div class="text-2xl md:text-3xl font-extrabold text-white mb-1 px-1 no-wrap-overflow" id="${person.name.replace(/\s/g, '-')}-days"></div>
                            <div class="text-sm text-gray-400">Days</div>
                        </div>
                        <!-- Hours -->
                        <div class="bg-gray-700 rounded-xl p-6 shadow-inner flex flex-col items-center justify-center">
                            <div class="text-2xl md:text-3xl font-extrabold text-white mb-1 px-1 no-wrap-overflow" id="${person.name.replace(/\s/g, '-')}-hours"></div>
                            <div class="text-sm text-gray-400">Hours</div>
                        </div>
                        <!-- Minutes -->
                        <div class="bg-gray-700 rounded-xl p-6 shadow-inner flex flex-col items-center justify-center">
                            <div class="text-2xl md:text-3xl font-extrabold text-white mb-1 px-1 no-wrap-overflow" id="${person.name.replace(/\s/g, '-')}-minutes"></div>
                            <div class="text-sm text-gray-400">Minutes</div>
                        </div>
                        <!-- Seconds -->
                        <div class="bg-gray-700 rounded-xl p-6 shadow-inner flex flex-col items-center justify-center">
                            <div class="text-2xl md:text-3xl font-extrabold text-white mb-1 px-1 no-wrap-overflow" id="${person.name.replace(/\s/g, '-')}-seconds"></div>
                            <div class="text-sm text-gray-400">Seconds</div>
                        </div>
                    </div>
                </div>
            `;
        }

        /**
         * Renders all people from the array on the page.
         */
        function renderPeople() {
            const container = document.getElementById('people-container');
            container.innerHTML = people.map(createPersonHtml).join('');
        }

        /**
         * Calculates and updates the age for a single person.
         * @param {object} person The person object with name and dob.
         */
        function updatePersonAge(person) {
            const now = new Date();
            const dob = new Date(person.dob);
            const difference = now - dob;

            // Calculate age in different units
            const seconds = Math.floor(difference / 1000);
            const minutes = Math.floor(seconds / 60);
            const hours = Math.floor(minutes / 60);
            const days = Math.floor(hours / 24);
            const weeks = Math.floor(days / 7);
            const years = now.getFullYear() - dob.getFullYear();
            
            // This is a simplified calculation for months, as it doesn't account for exact days in a month.
            const months = years * 12 + (now.getMonth() - dob.getMonth());

            // Update the display for each unit, applying Indian number formatting
            const nameId = person.name.replace(/\s/g, '-');
            
            const units = [
                { id: `${nameId}-years`, value: years },
                { id: `${nameId}-months`, value: months },
                { id: `${nameId}-weeks`, value: weeks },
                { id: `${nameId}-days`, value: days },
                { id: `${nameId}-hours`, value: hours },
                { id: `${nameId}-minutes`, value: minutes },
                { id: `${nameId}-seconds`, value: seconds }
            ];

            units.forEach(unit => {
                const element = document.getElementById(unit.id);
                if (element) {
                    element.textContent = formatIndianNumber(unit.value);
                    adjustFontSize(element);
                }
            });
        }

        /**
         * Updates the age for all people on the page.
         */
        function updateAllAges() {
            people.forEach(updatePersonAge);
        }

        /**
         * Sorts the people array based on age.
         * @param {string} order 'asc' for youngest first, 'desc' for oldest first.
         */
        function sortPeople(order) {
            // Re-create a copy to preserve the original default order
            const peopleToSort = [...people];
            
            if (order === 'none') {
                // To restore the original order, we simply render the original array
                renderPeople();
            } else {
                peopleToSort.sort((a, b) => {
                    const dobA = new Date(a.dob);
                    const dobB = new Date(b.dob);
                    if (order === 'asc') {
                        return dobB - dobA; // Youngest first
                    } else {
                        return dobA - dobB; // Oldest first
                    }
                });
                renderPeople(peopleToSort);
            }
            
            // Re-start the timer to update the ages
            clearInterval(updateIntervalId);
            updateIntervalId = setInterval(updateAllAges, 1000);
        }

        // Modified renderPeople function to accept an optional array
        function renderPeople(list = people) {
            const container = document.getElementById('people-container');
            container.innerHTML = list.map(createPersonHtml).join('');
        }

        document.addEventListener('DOMContentLoaded', () => {
            renderPeople();
            updateAllAges(); // Initial display
            updateIntervalId = setInterval(updateAllAges, 1000);
            
            const sortSelect = document.getElementById('sort-select');
            sortSelect.addEventListener('change', (event) => {
                sortPeople(event.target.value);
            });
        });
    </script>
</body>
</html>
